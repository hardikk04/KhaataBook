<%- include("./partials/header.ejs") %>
<div class="main px-10 py-5">
  <h1 class="text-3xl">Create New Hisaab</h1>
  <form action="/hisaab/create" method="post">
    <%if(error.length > 0){%>
        <p class="text-red-500 text-sm mt-2 mb-2"><%= error[0] %></p>
    <%}%>
    <input class="block rounded-md bg-zinc-300 px-4 p-2 w-1/3 text-zinc-600 mt-2
    outline-none <%= error.length > 0 ? "border-[1px] border-red-500" : ""%>" type="text"
    name="title" placeholder="Shopping Hisaab, Ghar ka Kharch..." />
    <textarea
      class="<%= error.length > 0 ? "border-[1px] border-red-500" : ""%> block rounded-md bg-zinc-300 px-4 p-2 w-1/2 resize-none mt-6 h-80 text-zinc-600 outline-none"
      name="description"
      placeholder="Daal, Aata, Cheeni"
    ></textarea>
    <div class="encrypt flex gap-40 mt-4 text-md">
      <label class="flex gap-2 cursor-pointer items-center">
        <input class="encrypt-input" type="checkbox" value="true" name="encrypted">
        Encrypt this file
      </label>
      <label class="flex gap-2 cursor-pointer items-center" >
        <input class="shareable-input" type="checkbox" value="true" name="shareable">
        Shareable file
      </label>
    </div>
    <div class="passcode flex gap-[7.9vw] mt-4 text-md">
      <input type="number" placeholder="Passcode" name="passcode" disabled class="passcode-input no-spinner rounded-md opacity-60 bg-zinc-300 px-2 py-2 w-32 text-zinc-600 mt-2
      outline-none">
      <label class="editPermission-label flex gap-2 cursor-pointer opacity-60 items-center">
        <input class="editPermission-input"  type="checkbox" value="true" name="editPermission">
        Edit permission
      </label>
    </div>
    <input
      type="submit"
      value="Create new Hisaab"
      class="text-white mt-6 px-4 py-2 rounded-md bg-blue-500 cursor-pointer block"
    />
  </form>
</div>
<script>
  const encrypt = document.querySelector(".encrypt-input")
  const passcode = document.querySelector(".passcode-input");
  
  const shareable = document.querySelector(".shareable-input")
  const editPermission = document.querySelector(".editPermission-input");
  const editPermissionLabel = document.querySelector(".editPermission-label");


  encrypt.addEventListener("click",(event)=>{
    if(event.target.checked){
      event.target.value = true;
      passcode.disabled = false;
      passcode.style.opacity = "100%"
    }else{
      event.target.value = false;
      passcode.disabled = true;
      passcode.style.opacity = "60%"
    }
  })

  shareable.addEventListener("click",(event)=>{
    if(event.target.checked){
      event.target.value = true;
      editPermission.disabled = false;
      editPermissionLabel.style.opacity = "100%"
    }else{
      event.target.value = false;
      editPermission.disabled = true;
      editPermissionLabel.style.opacity = "60%"
    }
  })
</script>
<%- include("./partials/footer.ejs")%>
